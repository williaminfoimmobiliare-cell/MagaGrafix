/* ================================
   STYLE — MagaGrafix (blu pro, light & dark)
   ================================ */

@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Inter:wght@400;600&display=swap');

/* ========== THEME TOKENS (default: dark) ========== */
:root {
  --bg: #0f172a;
  --bg-soft: #1e293b;
  --card: #1e293b;
  --card-2: #27364a;
  --text: #e2e8f0;
  --muted: #94a3b8;
  --white: #ffffff;

  --accent: #1E90FF;
  --accent-light: #3ea8ff;
  --accent-dark: #0063cc;

  --border: #334155;
  --success: #10b981;
  --warning: #facc15;
  --danger:  #ef4444;
  --info:    #3b82f6;

  --ring: rgba(30,144,255,.4);
  --shadow: 0 6px 18px rgba(0,0,0,.3);
}

/* LIGHT THEME OVERRIDES */
:root.theme-light {
  --bg: #f4f7fb;
  --bg-soft: #e9eef6;
  --card: #ffffff;
  --card-2: #f7f9fc;
  --text: #0f172a;
  --muted: #475569;
  --white: #0f172a;

  --accent: #1E90FF;
  --accent-light: #3ea8ff;
  --accent-dark: #0a66cc;

  --border: #d6e0ee;
  --success: #059669;
  --warning: #d97706;
  --danger:  #dc2626;
  --info:    #2563eb;

  --ring: rgba(30,144,255,.35);
  --shadow: 0 6px 16px rgba(15,23,42,.08);
}

/* Preferenza di sistema: se non hai salvato nulla, il JS imposta light/dark.
   Qui manteniamo un fallback elegante: */
@media (prefers-color-scheme: light) {
  :root:not(.theme-dark):not(.theme-light) {
    /* stesso set della light */
    --bg: #f4f7fb;
    --bg-soft: #e9eef6;
    --card: #ffffff;
    --card-2: #f7f9fc;
    --text: #0f172a;
    --muted: #475569;
    --white: #0f172a;

    --accent: #1E90FF;
    --accent-light: #3ea8ff;
    --accent-dark: #0a66cc;

    --border: #d6e0ee;
    --success: #059669;
    --warning: #d97706;
    --danger:  #dc2626;
    --info:    #2563eb;

    --ring: rgba(30,144,255,.35);
    --shadow: 0 6px 16px rgba(15,23,42,.08);
  }
}

/* ========== BASE ========== */
*,
*::before,
*::after { box-sizing: border-box; }

html, body { margin: 0; padding: 0; scroll-behavior: smooth; }

body {
  font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--text);
  background: var(--bg);
  -webkit-font-smoothing: antialiased;
}

.wrap { max-width: 1200px; margin: 0 auto; padding: 24px; }

/* HEADER */
header {
  text-align: center;
  padding: 10px 0 22px;
  border-bottom: 1px solid var(--border);
}
header h1 {
  font-family: 'Orbitron', sans-serif;
  font-size: clamp(28px, 4vw, 46px);
  letter-spacing: .5px;
  margin: 0;
  background: linear-gradient(90deg, var(--accent), var(--accent-light));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 0 8px color-mix(in srgb, var(--accent) 40%, transparent);
  animation: subtlePulse 3s ease-in-out infinite alternate;
}
@keyframes subtlePulse {
  0%   { text-shadow: 0 0 8px color-mix(in srgb, var(--accent) 25%, transparent); }
  100% { text-shadow: 0 0 16px color-mix(in srgb, var(--accent) 55%, transparent); }
}
header .small { color: var(--muted); font-size: .98rem; margin-top: 6px; }

/* ACTION BAR */
.top-actions {
  display: flex; flex-wrap: wrap; justify-content: center;
  gap: 10px; margin: 18px 0 22px;
}

/* GRID */
.grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
@media (max-width: 980px) { .grid { grid-template-columns: 1fr; } }

/* CARDS */
.card {
  background: linear-gradient(180deg, var(--card) 0%, var(--card-2) 100%);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 16px;
  box-shadow: var(--shadow);
}
.card h3 {
  margin: 0 0 10px;
  font-family: 'Orbitron', sans-serif;
  color: var(--accent);
  font-size: 1.08rem;
}

/* LAYOUT UTILS */
.small { font-size: .9rem; color: var(--muted); }
.hidden { display: none !important; }
.flexcol { display: flex; flex-direction: column; gap: 10px; }
.row { display: flex; gap: 10px; }
.flex-between { display: flex; justify-content: space-between; align-items: center; }
.controls { display: flex; gap: 8px; justify-content: flex-end; }

/* FORMS */
input, select {
  width: 100%;
  background: var(--bg-soft);
  border: 1px solid var(--border);
  color: var(--white);
  border-radius: 10px;
  padding: 10px 12px;
  outline: none;
  transition: border-color .15s ease, box-shadow .15s ease, transform .05s ease;
}
:root.theme-light input, :root.theme-light select { color: #0f172a; }
input::placeholder { color: color-mix(in srgb, var(--muted) 85%, transparent); }
input:hover, select:hover { border-color: color-mix(in srgb, var(--accent) 25%, var(--border)); }
input:focus, select:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--ring);
}

/* BUTTONS */
button {
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: 10px;
  padding: 10px 16px;
  font-weight: 600;
  font-size: .95rem;
  cursor: pointer;
  transition: background .2s, transform .06s, box-shadow .2s;
  box-shadow: 0 2px 0 rgba(0,0,0,.18), 0 10px 20px color-mix(in srgb, var(--accent) 18%, transparent);
}
button:hover { background: var(--accent-light); }
button:active { transform: translateY(1px) scale(.99); }
button:focus-visible { outline: 2px solid transparent; box-shadow: 0 0 0 3px var(--ring); }
button.ghost {
  background: transparent;
  border: 1px solid var(--accent);
  color: var(--accent);
  box-shadow: none;
}
button.ghost:hover { background: color-mix(in srgb, var(--accent) 12%, transparent); }
button.danger { background: var(--danger); }

/* SWITCH (AutoSync) */
.switch {
  display: inline-flex; align-items: center; gap: 10px;
  padding: 6px 10px; border: 1px dashed var(--border);
  border-radius: 999px; color: var(--muted); user-select: none;
}
.switch input {
  appearance: none; width: 46px; height: 26px; border-radius: 999px;
  background: color-mix(in srgb, var(--border) 60%, var(--bg-soft));
  position: relative; transition: background .2s ease, border-color .2s ease;
}
.switch input::after {
  content: ''; position: absolute; top: 2px; left: 2px;
  width: 20px; height: 20px; border-radius: 50%; background: #e2e8f0;
  transform: translateX(0); transition: transform .2s ease, background .2s ease;
}
.switch input:checked { background: var(--accent); }
.switch input:checked::after { transform: translateX(20px); background: #0f172a; }
.switch span { font-weight: 600; }

/* ALERT BAR */
.alertbar {
  background: linear-gradient(90deg, color-mix(in srgb, var(--danger) 85%, transparent), color-mix(in srgb, var(--warning) 85%, transparent));
  padding: 10px 14px; border: 1px solid color-mix(in srgb, #fff 14%, transparent);
  border-radius: 12px; color: #fff; text-align: center; font-weight: 700; letter-spacing: .2px;
  box-shadow: var(--shadow);
}

/* CHART WRAPPER */
.chartwrap { background: #0d1117; border-radius: 12px; padding: 10px; border: 1px solid var(--border); }
:root.theme-light .chartwrap { background: #f8fbff; }

/* TABLES */
table {
  width: 100%; border-collapse: collapse; font-size: .96rem;
  border: 1px solid var(--border); border-radius: 12px; overflow: hidden;
}
thead th {
  position: sticky; top: 0; z-index: 1;
  background: var(--bg-soft); color: var(--accent);
  padding: 10px 8px; text-align: center; letter-spacing: .3px;
}
tbody td {
  padding: 10px 8px; text-align: center; border-bottom: 1px solid color-mix(in srgb, var(--border) 75%, transparent);
}
tbody tr:nth-child(odd) { background: color-mix(in srgb, var(--bg-soft) 65%, transparent); }
tbody tr:nth-child(even) { background: color-mix(in srgb, var(--bg-soft) 35%, transparent); }
:root.theme-light tbody tr:nth-child(odd) { background: #f5f8fd; }
:root.theme-light tbody tr:nth-child(even) { background: #eef4fb; }
tbody tr:hover { background: color-mix(in srgb, var(--accent) 10%, transparent); }

/* BADGE ESEMPLIFICATIVE (se le usi) */
td .badge {
  display: inline-block; padding: 4px 8px; border-radius: 999px; font-size: .8rem; font-weight: 700;
}
.badge-ok { background: rgba(16,185,129,.15); color: #16a34a; border: 1px solid rgba(16,185,129,.25); }
.badge-no { background: rgba(239,68,68,.15); color: #ef4444; border: 1px solid rgba(239,68,68,.25); }

/* SCROLLBAR */
::-webkit-scrollbar { width: 10px; height: 10px; }
::-webkit-scrollbar-track { background: color-mix(in srgb, var(--bg) 90%, transparent); }
::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, var(--accent), var(--accent-dark));
  border-radius: 10px; border: 2px solid color-mix(in srgb, var(--bg) 90%, transparent);
}

/* FOOTER */
footer { margin-top: 28px; font-size: .9rem; color: var(--muted); text-align: center; opacity: .9; }

/* RESPONSIVE */
@media (max-width: 700px) {
  .row { flex-direction: column; }
  .controls { justify-content: stretch; }
  .top-actions { gap: 8px; }
  button { width: 100%; }
  .switch { width: 100%; justify-content: space-between; }
}

/* PRINT */
@media print {
  body { background: #fff; color: #000; }
  header { border: none; }
  header h1 { -webkit-text-fill-color: initial; color: #000; text-shadow: none; background: none; }
  .card, .chartwrap, table { border: 1px solid #e5e7eb; box-shadow: none; }
  button, .alertbar, .switch { display: none !important; }
}
/* ===============================
   Responsive: tablet & mobile
   =============================== */

/* Tablet (<= 1024px) */
@media (max-width: 1024px) {
  .grid { grid-template-columns: 1fr; gap: 16px; }

  header { padding-bottom: 14px; }
  .card { border-radius: 12px; padding: 14px; }
  input, select { padding: 10px 12px; border-radius: 10px; }
  button { padding: 12px 16px; border-radius: 12px; }
  .chartwrap { padding: 10px; }
}

/* Telefono (<= 768px) */
@media (max-width: 768px) {
  .row { flex-direction: column; gap: 8px; }
  .controls { justify-content: stretch; }
  button { width: 100%; min-height: 44px; }           /* target tattile comodo */
  input, select { min-height: 44px; }

  /* Action bar “appiccicosa” in alto */
  .top-actions {
    position: sticky;
    top: 0;
    z-index: 50;
    padding: 10px;
    margin: 12px 0 18px;
    border-radius: 12px;
    background: color-mix(in srgb, var(--bg) 78%, var(--white));
    backdrop-filter: blur(8px);
    border: 1px solid var(--border);
  }

  /* Grafici più compatti */
  .chartwrap canvas { max-height: 280px !important; }

  /* Tabelle → modalità CARD leggibile */
  table { border: 0; }
  table thead { display: none; }
  table, tbody, tr, td { display: block; width: 100%; }
  tbody tr {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 10px 12px;
    margin-bottom: 12px;
  }
  tbody td {
    border: 0;
    padding: 6px 0;
    display: flex;
    gap: 10px;
    justify-content: space-between;
    align-items: baseline;
  }
  /* Mostra l’etichetta della colonna prima del valore */
  tbody td::before {
    content: attr(data-label);
    color: var(--muted);
    font-weight: 600;
    margin-right: 10px;
    text-align: left;
  }
}

/* Telefoni piccoli (<= 420px) */
@media (max-width: 420px) {
  header h1 { font-size: clamp(24px, 7vw, 32px); }
  .wrap { padding: 16px; }
  .card { padding: 12px; }
  .top-actions { gap: 8px; }
  .switch { width: 100%; justify-content: space-between; }
  .chartwrap canvas { max-height: 220px !important; }
}

/* Aree “notch” iOS/Android */
@supports (padding: max(0px)) {
  body {
    padding-bottom: max(0px, env(safe-area-inset-bottom));
  }
}

